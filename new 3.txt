#include <ESP8266WiFi.h>
#include <WiFiClientSecure.h>

// Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ø´Ø¨ÙƒØªÙƒ:
const char* ssid = "stc_wifi_7991";
const char* password = "2aLm3D7T8hm";

const char* telegramToken = "8059458818:AAF_GGkMay7RC73t5xX1r6z5mxJxKDVLVZM";
const char* chat_id = "1037874961";

const char* host = "api.telegram.org";

void setup() {
  Serial.begin(115200);
  WiFi.begin(ssid, password);
  Serial.print("Connecting");

  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }

  Serial.println("\nWiFi connected");

  // Ø¥Ø±Ø³Ø§Ù„ Ø£ÙˆÙ„ Ø±Ø³Ø§Ù„Ø©
  sendTelegramMessage("ğŸš¨ ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ù†Ø´Ø§Ø· Ù…Ø´Ø¨ÙˆÙ‡ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¨ÙƒØ©!");
}

void loop() {
  // ØªÙ‚Ø¯Ø± Ù‡Ù†Ø§ ØªØ¶ÙŠÙ Ø´Ø±ÙˆØ· Ù…Ø¹ÙŠÙ†Ø© ØªØ±Ø³Ù„ Ø¹Ù†Ø¯ ØªØ­Ù‚Ù‚Ù‡Ø§
}

void sendTelegramMessage(String message) {
  WiFiClientSecure client;
  client.setInsecure(); // Ø¨Ø¯ÙˆÙ† ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©

  if (!client.connect(host, 443)) {
    Serial.println("Connection failed!");
    return;
  }

  String url = "/bot" + String(telegramToken) + "/sendMessage?chat_id=" + chat_id + "&text=" + message;

  client.print(String("GET ") + url + " HTTP/1.1\r\n" +
               "Host: " + host + "\r\n" +
               "Connection: close\r\n\r\n");

  Serial.println("Message sent to Telegram!");
}
